
<b><a href=http://www.w3schools.com/tags/ref_canvas.asp target=1>
<big>HTML5 Canvas Reference is here</big></a></b>

<p>
<p>

<center>
<table>
<tr>
<td>
<center>
<canvas id=canvas1 width=400 height=400></canvas>
<p>

<i></i>

</center>
</td>
</tr>
</table>
<p>
</center>
<p>

<script src=utility.js></script>
<script src=drawlib1.js></script>
<script src=matrix.js></script>

<script>

   var HEIGHT = WIDTH = 400;

   var canvas;

   var matrix = new Matrix();
   matrix.identity();

   

   var pt0 = new Vector3(-1, 0, 0);
   var pt1 = new Vector3( 1, 0, 0);
   var tmp = new Vector3( 0, 0, 0);

   var pix0 = new Vector3(0, 0, 0);
   var pix1 = new Vector3(0, 0, 0);

   var EPSILON = .01;

   // for the x values of the curve


   var bezierABCD = {
      x : .1,
      y : .9,
      z : 1,
      w : 1
   };

   var xabcd = {w : 0};
   var yabcd = {w : 0};

   
   var bezierMatrix = new Matrix();

   var bezierM = [[-1, 3, -3, 1], [3, -6, 3, 0], [-3, 3, 0, 0], [1, 0, 0, 0]];
   // matrix for hermiteCurves

   
   // bezierMatrix._data = bezierM;
   // console.log(hermiteCurve.toString());
   // hermiteCurve.transform(bezierABCD, abcd);

   
   
   var g;
   var width;
   var height;

   function drawHermiteCurve(g){
      
      var hermiteXABCD = {
         x : -1, // x value at t = 0 
         y : 1, // x value at t = 1
         z : 1, // slope of curve at t = 0
         w : -1 //slope of curve at t = 1
      };
      // for the y values of the curve
      var hermiteYABCD = {
         x : 1, // y value at t = 0
         y : -1, // y value at t = 1
         z : -3, // slope of curve at t = 0
         w : -.5  //slope of curve at t = 1
      };
      var hermiteABCD = [{x: hermiteXABCD, y: hermiteYABCD}];

      var XABCD = {
         x : 1,
         y : 0, 
         z : -1,
         w : .5 
      };
      // for the y values of the curve
      var YABCD = {
         x : -1,
         y : .1,
         z : -.5, 
         w : .6
      };

      hermiteABCD.push({x: XABCD, y: YABCD});

      var hermiteCurve = new Matrix();
      var hermiteM = [[2, -2, 1, 1], [-3, 3, -2, -1], [0, 0, 1, 0], [1, 0, 0, 0]];

      hermiteCurve._data = hermiteM;
      // hermiteCurve.rotateY(Math.sin(time));
      hermiteCurve.scale(.5);

      abcd = getAbcd(hermiteABCD, hermiteCurve);

      // draw hermite curve
      
      drawCurve(g, abcd);

   }

   function drawBezierCurve(g){
      var XABCD = {
         x : .55,
         y : 1.99, 
         z : .37,
         w : .08 
      };
      // for the y values of the curve
      var YABCD = {
         x : .12,
         y : .85,
         z : 1.27, 
         w : .3
      };
      var bezierABCD = [{x: XABCD, y: YABCD}];

      // XABCD = {
      //    x : .55,
      //    y : 1.99, 
      //    z : .37,
      //    w : .08 
      // };
      // // for the y values of the curve
      // YABCD = {
      //    x : .12,
      //    y : .85,
      //    z : 1.27, 
      //    w : .3
      // };



      var bezierCurve = new Matrix();
      var bezierM = [[-1, 3, -3, 1], [3, -6, 3, 0], [-3, 3, 0, 0], [1, 0, 0, 0]];

      bezierCurve._data = bezierM;

      var abcd = getAbcd(bezierABCD, bezierCurve);
      drawCurve(g, abcd);

   }

   function getAbcd(ABCDs, matrix){
         var abcds = [];
         for (var i in ABCDs){
            var x = {w:0};
            var y = {w:0};
            matrix.transform(ABCDs[i].x, x);
            matrix.transform(ABCDs[i].y, y);

            abcds.push({x: x, y: y});
         }
         return abcds;
      }

   function calculate(abcd, t){
      return (abcd.x * Math.pow(t, 3)) + (abcd.y * Math.pow(t, 2)) + (abcd.z * t) + abcd.w;
      // return t * (t * (abcd.x * t * abcd.y) + abcd.z) + abcd.w; //must have copied this wrong... :/
   }

   function drawCurve(g, abcd){
      var pointsOnCurve = [];
      for (var i in abcd){
         for (var t = 0; t <= 1; t += EPSILON){
            var y = calculate(abcd[i].y, t);
            var x = calculate(abcd[i].x, t);
            var point = new Vector3(x, y, -10);
            var pixel = {};
            point.viewportTransform(WIDTH, HEIGHT, pixel);
            pointsOnCurve.push(pixel);
         }         
      }
      g.beginPath();
      g.moveTo(pointsOnCurve[0].x, pointsOnCurve[0].y);
      for (var i in pointsOnCurve){
         var p = pointsOnCurve;
         g.lineTo(p[i].x, p[i].y);
      }
      g.stroke();
   }

   canvas = initCanvas('canvas1');
   canvas.update = function(_g) {
      g = _g;
      width = canvas.width;
      height = canvas.height;

      // OUTLINE AROUND CANVAS

      g.lineWidth = 2;
      g.strokeStyle = 'black';
      g.beginPath();
      g.moveTo(0, 0);
      g.lineTo(width, 0);
      g.lineTo(width, height);
      g.lineTo(0, height);
      g.lineTo(0, 0);
      g.stroke();

      // Draw Hermite curve
      drawBezierCurve(g);

      // Draw Bezier Curve
      // drawHermiteCurve(g);

      






      
   }
</script>

